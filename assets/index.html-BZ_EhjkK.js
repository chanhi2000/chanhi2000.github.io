import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,d as s,b as a,at as p,t as v,w as e,r as o,o as b,e as c}from"./app-DM0WOK1z.js";const f="/images/swift/note-analyzer-audiokit-01.jpg",w="/images/swift/note-analyzer-audiokit-02.jpg",y={},g={id:"frontmatter-title-관련",tabindex:"-1"},h={class:"header-anchor",href:"#frontmatter-title-관련"},S={class:"table-of-contents"},A={class:"hint-container details"},C={id:"viewcontroller-swift",tabindex:"-1"},I={class:"header-anchor",href:"#viewcontroller-swift"},x={class:"hint-container details"},V={id:"contentview-swift",tabindex:"-1"},D={class:"header-anchor",href:"#contentview-swift"},q={class:"hint-container details"},N={id:"viewcontroller-swift-1",tabindex:"-1"},B={class:"header-anchor",href:"#viewcontroller-swift-1"},L={class:"hint-container details"},R={id:"viewcontroller-swift-2",tabindex:"-1"},T={class:"header-anchor",href:"#viewcontroller-swift-2"};function M(u,n){const t=o("router-link"),l=o("VidStack"),k=o("SiteInfo"),i=o("VPIcon"),r=o("TagLinks");return b(),m("div",null,[s("h1",g,[s("a",h,[s("span",null,v(u.$frontmatter.title)+" 관련",1)])]),s("nav",S,[s("ul",null,[s("li",null,[a(t,{to:"#uikit"},{default:e(()=>n[0]||(n[0]=[c("UIKit")])),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#animated-curve-line"},{default:e(()=>n[1]||(n[1]=[c("Animated Curve Line")])),_:1})])])]),s("li",null,[a(t,{to:"#swiftui"},{default:e(()=>n[2]||(n[2]=[c("SwiftUI")])),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#side-menu"},{default:e(()=>n[3]||(n[3]=[c("Side Menu")])),_:1})]),s("li",null,[a(t,{to:"#audio-bluetooth-connection"},{default:e(()=>n[4]||(n[4]=[c("Audio Bluetooth Connection")])),_:1})]),s("li",null,[a(t,{to:"#note-analyzer-audiokit"},{default:e(()=>n[5]||(n[5]=[c("Note Analyzer AudioKit")])),_:1})]),s("li",null,[a(t,{to:"#stretchy-header"},{default:e(()=>n[6]||(n[6]=[c("Stretchy Header")])),_:1})])])])])]),n[19]||(n[19]=s("hr",null,null,-1)),n[20]||(n[20]=s("h2",{id:"uikit",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#uikit"},[s("span",null,"UIKit")])],-1)),n[21]||(n[21]=s("h3",{id:"animated-curve-line",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#animated-curve-line"},[s("span",null,"Animated Curve Line")])],-1)),a(l,{title:"Tip #469: Animated Waveform UIKit. Create a waveform that animates along screen using UIBeizerPath and a special object CADisplayLink to render the drawing with the apps refresh rate of the display.",src:"/videos/swift/animated-waveform-uikit.mp4"}),a(k,{name:"swift3 - Animated curve line in Swift 3 - Stack Overflow",desc:"I want to draw some bezier lines and I want to animate them with a wave effect,",url:"https://stackoverflow.com/questions/44006942/animated-curve-line-in-swift-3",preview:"https://i.stack.imgur.com/MZv0h.png"}),s("details",A,[n[8]||(n[8]=s("summary",null,"Animated Curve Line",-1)),s("h3",C,[s("a",I,[s("span",null,[a(i,{icon:"fa-brands fa-swift"}),n[7]||(n[7]=s("code",null,"ViewController.swift",-1))])])]),n[9]||(n[9]=p(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">import</span> <span class="token class-name">UIKit</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token class-name">UIViewController</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">weak</span> <span class="token keyword">var</span> displayLink<span class="token punctuation">:</span> <span class="token class-name">CADisplayLink</span><span class="token operator">?</span> <span class="token comment">// syncs drawing to refresh rate of display</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> startTime<span class="token punctuation">:</span> <span class="token class-name">CFTimeInterval</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">let</span> shapeLayer<span class="token punctuation">:</span> <span class="token class-name">CAShapeLayer</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> shapeLayer <span class="token operator">=</span> <span class="token class-name">CAShapeLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        shapeLayer<span class="token punctuation">.</span>strokeColor <span class="token operator">=</span> <span class="token class-name">UIColor</span><span class="token punctuation">.</span>red<span class="token punctuation">.</span>cgColor <span class="token comment">// structure of wave is red</span></span>
<span class="line">        shapeLayer<span class="token punctuation">.</span>fillColor <span class="token operator">=</span> <span class="token class-name">UIColor</span><span class="token punctuation">.</span>black<span class="token punctuation">.</span>cgColor <span class="token comment">// the wave fill is black</span></span>
<span class="line">        shapeLayer<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// width of the stroke</span></span>
<span class="line">        <span class="token keyword">return</span> shapeLayer</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">viewDidAppear</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> animated<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidAppear</span><span class="token punctuation">(</span>animated<span class="token punctuation">)</span></span>
<span class="line">        view<span class="token punctuation">.</span>layer<span class="token punctuation">.</span><span class="token function">addSubLayer</span><span class="token punctuation">(</span>shapeLayer<span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">startDisplayLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">viewDidDisappear</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> animated<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidDisappear</span><span class="token punctuation">(</span>animated<span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">stopDisplayLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </span>
<span class="line">        <span class="token comment">// stop the display link because it has a strong reference to the target</span></span>
<span class="line">        <span class="token comment">// this is good practice because it uses memory and we need to deallocate it when we are not using it.</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">startDisplayLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        startTime <span class="token operator">=</span> <span class="token class-name">CACurrentMediaTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>displayLink<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> displayLink <span class="token operator">=</span> <span class="token class-name">CADisplayLink</span><span class="token punctuation">(</span>taret<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> selector<span class="token punctuation">:</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span><span class="token function">handleDisplayLink</span><span class="token punctuation">(</span><span class="token omit keyword">_</span><span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        displayLink<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token punctuation">.</span>main<span class="token punctuation">,</span> forMode<span class="token punctuation">:</span> <span class="token punctuation">.</span>common<span class="token punctuation">)</span> <span class="token comment">// puts the displayLink on main thread</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>displayLink <span class="token operator">=</span> displayLink</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">stopDisplayLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        displayLink<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token attribute atrule">@objc</span> <span class="token keyword">func</span> <span class="token function-definition function">handleDisplayLink</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> displayLink<span class="token punctuation">:</span> <span class="token class-name">CADisplayLink</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> elapsed <span class="token operator">=</span> <span class="token class-name">CACurrentMediaTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime <span class="token comment">// starts the elapsed at 0 and sets the offsets with startTime since that variables value doesn&#39;t change</span></span>
<span class="line">        shapeLayer<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token function">wav</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> elapsed<span class="token punctuation">)</span><span class="token punctuation">.</span>cgPath <span class="token comment">// update the wave&#39;s path with a custom return function.</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">wave</span><span class="token punctuation">(</span>at elapsed<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">UIBezierPath</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> elapsed <span class="token operator">=</span> <span class="token class-name">CGFloat</span><span class="token punctuation">(</span>elapsed<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> centerY <span class="token operator">=</span> view<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>midY</span>
<span class="line">        <span class="token keyword">let</span> amplitude <span class="token operator">=</span> <span class="token number">50</span> <span class="token operator">-</span> <span class="token function">abs</span><span class="token punctuation">(</span>elapsed<span class="token punctuation">.</span><span class="token function">remainder</span><span class="token punctuation">(</span>dividingBy<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">40</span> <span class="token comment">// height of the waveform</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">func</span> <span class="token function-definition function">f</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> x<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">CGFloat</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// function that is going to calculate the y position of the point in the waveform</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span> elapsed<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">.</span>pi<span class="token punctuation">)</span> <span class="token operator">*</span> amplitude <span class="token operator">+</span> centerY</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token class-name">UIBezierPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> steps <span class="token operator">=</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// the amount of steps in the waveform</span></span>
<span class="line">        path<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">for</span> step <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">...</span>steps <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// start loop at 1 to match the count of steps</span></span>
<span class="line">            <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token class-name">CGFloat</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">CGFloat</span><span class="token punctuation">(</span>steps<span class="token punctuation">)</span></span>
<span class="line">            path<span class="token punctuation">.</span><span class="token function">addLine</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token class-name">CGPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> x <span class="token operator">*</span> view<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>width<span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// use that x value to draw the waveform</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> path</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1))]),n[22]||(n[22]=s("hr",null,null,-1)),n[23]||(n[23]=s("h2",{id:"swiftui",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#swiftui"},[s("span",null,"SwiftUI")])],-1)),n[24]||(n[24]=s("h3",{id:"side-menu",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#side-menu"},[s("span",null,"Side Menu")])],-1)),a(l,{title:"Tip #435: Side Menu SwiftUI. Create a Side Menu that allows you to present options for the user to navigate through your app. Swipe for code.",src:"/videos/swift/side-menu.mp4"}),s("details",x,[n[11]||(n[11]=p('<summary>SideMenu</summary><table><thead><tr><th style="text-align:center;">title</th><th style="text-align:left;">description</th></tr></thead><tbody><tr><td style="text-align:center;">IDE Version</td><td style="text-align:left;">Xcode 11.5</td></tr><tr><td style="text-align:center;">Swift Version</td><td style="text-align:left;">5.2</td></tr><tr><td style="text-align:center;">Xcode Template</td><td style="text-align:left;">Single View Application</td></tr><tr><td style="text-align:center;">User Interface</td><td style="text-align:left;">SwiftUI</td></tr></tbody></table>',2)),s("h4",V,[s("a",D,[s("span",null,[a(i,{icon:"fa-brands fa-swift"}),n[10]||(n[10]=s("code",null,"ContentView.swift",-1))])])]),n[12]||(n[12]=p(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> showMenu <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> drag <span class="token operator">=</span> <span class="token class-name">DragGesture</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span>onEnded <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>translation<span class="token punctuation">.</span>width <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">100</span> <span class="token punctuation">{</span></span>
<span class="line">                    withAnimation <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token keyword">self</span><span class="token punctuation">.</span>showMenu <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token class-name">NavigationView</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">GeometryReader</span> <span class="token punctuation">{</span> geo <span class="token keyword">in</span></span>
<span class="line">            <span class="token class-name">ZStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token keyword">self</span><span class="token punctuation">.</span>showMenu <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token class-name">MenuView</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                        <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">.</span>showMenu <span class="token operator">?</span> <span class="token operator">-</span>geo<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">4</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">                        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> geo<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">                        <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>edge<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">gesture</span><span class="token punctuation">(</span>drag<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">navigationBarTitle</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;My App&quot;</span></span><span class="token punctuation">,</span> displayMode<span class="token punctuation">:</span> <span class="token punctuation">.</span>inline<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">navigationBarItems</span><span class="token punctuation">(</span>leading<span class="token punctuation">:</span> <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">            withAnimation <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">self</span><span class="token punctuation">.</span>showMenu<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Image</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;line.horizontal.3&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">imageScale</span><span class="token punctuation">(</span><span class="token punctuation">.</span>large<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">MenuView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Vstack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">HStack</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token class-name">HStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Image</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;calendar&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>gray<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">imageScale</span><span class="token punctuation">(</span><span class="token punctuation">.</span>large<span class="token punctuation">)</span></span>
<span class="line">            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Calendar&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>gray<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>headline<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token class-name">HStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Image</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;flag&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>gray<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">imageScale</span><span class="token punctuation">(</span><span class="token punctuation">.</span>large<span class="token punctuation">)</span></span>
<span class="line">            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Flagged Mail&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>gray<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>headline<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token class-name">HStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Image</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;trash&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>gray<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">imageScale</span><span class="token punctuation">(</span><span class="token punctuation">.</span>large<span class="token punctuation">)</span></span>
<span class="line">            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Trash&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>gray<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>headline<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>maxWidth<span class="token punctuation">:</span> <span class="token punctuation">.</span>infinity<span class="token punctuation">,</span> alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>black<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">edgesIgnoringSafeArea</span><span class="token punctuation">(</span><span class="token punctuation">.</span>all<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="bottomsheet" tabindex="-1"><a class="header-anchor" href="#bottomsheet"><span>BottomSheet</span></a></h4><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">BottomSheetView</span><span class="token operator">&lt;</span><span class="token class-name">Content</span><span class="token punctuation">:</span> <span class="token class-name">View</span><span class="token operator">&gt;</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// MARK:- PROPERTIES</span></span>
<span class="line">    <span class="token attribute atrule">@GestureState</span> <span class="token keyword">private</span> <span class="token keyword">var</span> translation<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token attribute atrule">@Binding</span> <span class="token keyword">var</span> isOpen<span class="token punctuation">:</span> <span class="token class-name">Bool</span></span>
<span class="line">    <span class="token keyword">let</span> maxHeight<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span></span>
<span class="line">    <span class="token keyword">let</span> minHeight<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span></span>
<span class="line">    <span class="token keyword">let</span> content<span class="token punctuation">:</span> <span class="token class-name">Content</span></span>
<span class="line">    <span class="token keyword">let</span> radius <span class="token operator">=</span> <span class="token number">20</span></span>
<span class="line">    <span class="token keyword">let</span> heightRatio <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token keyword">let</span> indicatorWidth <span class="token operator">=</span> <span class="token number">40</span></span>
<span class="line">    <span class="token keyword">let</span> indicatorHeight <span class="token operator">=</span> <span class="token number">5</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>isOpen<span class="token punctuation">:</span> <span class="token class-name">Binding</span><span class="token operator">&lt;</span><span class="token class-name">Bool</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> maxHeight<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span><span class="token punctuation">,</span> <span class="token attribute atrule">@ViewBuilder</span> content<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>minHeight <span class="token operator">=</span> maxHeight <span class="token operator">*</span> <span class="token class-name">CGFloat</span><span class="token punctuation">(</span>heightRatio<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>maxHeight <span class="token operator">=</span> maxHeight</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>_isOpen <span class="token operator">=</span> isOpen</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> offset<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span> <span class="token punctuation">{</span></span>
<span class="line">        isOpen <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> maxHeight <span class="token operator">-</span> minHeight</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> indicator<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">RoundedRectangle</span><span class="token punctuation">(</span>cornerRadius<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>secondary<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span></span>
<span class="line">                width<span class="token punctuation">:</span> <span class="token class-name">CGFloat</span><span class="token punctuation">(</span>indicatorWidth<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                height<span class="token punctuation">:</span> <span class="token class-name">CGFlaot</span><span class="token punctuation">(</span>indicatorHeight<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// MARK:- BODY</span></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">GeometryReader</span> <span class="token punctuation">{</span> geometry <span class="token keyword">in</span> </span>
<span class="line">            <span class="token class-name">VStack</span><span class="token punctuation">(</span>spacing<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">self</span><span class="token punctuation">.</span>indicator<span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">self</span><span class="token punctuation">.</span>content</span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> geometry<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">.</span>maxHeight<span class="token punctuation">,</span> alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">cornerRadius</span><span class="token punctuation">(</span><span class="token class-name">CGFloat</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> geometry<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token punctuation">,</span> alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>y<span class="token punctuation">:</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>offset <span class="token operator">+</span> <span class="token keyword">self</span><span class="token punctuation">.</span>translation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">interpolatingSpring</span><span class="token punctuation">(</span>mass<span class="token punctuation">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span> stiffness<span class="token punctuation">:</span> <span class="token number">100.0</span><span class="token punctuation">,</span> damping<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> initialVelocity<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">gesture</span><span class="token punctuation">(</span></span>
<span class="line">                <span class="token class-name">DragGesture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updating</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>$translation<span class="token punctuation">)</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span></span>
<span class="line">                    state <span class="token operator">=</span> value<span class="token punctuation">.</span>translation<span class="token punctuation">.</span>height</span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">.</span>onEnded <span class="token punctuation">{</span> value <span class="token keyword">in</span></span>
<span class="line">                    <span class="token keyword">let</span> snapDistance <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>maxHeight <span class="token operator">*</span> <span class="token number">0.1</span></span>
<span class="line">                    <span class="token keyword">guard</span> <span class="token function">abs</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>translation<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">&gt;</span> snapDistance <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token keyword">return</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token keyword">self</span><span class="token punctuation">.</span>isOpen <span class="token operator">=</span> value<span class="token punctuation">.</span>translation<span class="token punctuation">.</span>height <span class="token operator">&lt;</span> <span class="token number">0</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">)</span> </span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">SheetView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// MARK:- PROPERTIES</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> bottomSheetShown <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// MARK:- BODY</span></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> bottomSheetShown <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>black<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.7</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">edgesIgnoringSafeArea</span><span class="token punctuation">(</span><span class="token punctuation">.</span>all<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span>onTapGesture <span class="token punctuation">{</span></span>
<span class="line">                    bottomSheetShown<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">GeometryReader</span> <span class="token punctuation">{</span> geometry <span class="token keyword">in</span></span>
<span class="line">            <span class="token class-name">BottomSheetView</span><span class="token punctuation">(</span></span>
<span class="line">                iseOpen<span class="token punctuation">:</span> <span class="token keyword">Self</span><span class="token punctuation">.</span>$bottomSheetShown<span class="token punctuation">,</span></span>
<span class="line">                <span class="token comment">// Setting Bottom sheet height percentage to 70% wrt main screen</span></span>
<span class="line">                maxHeight<span class="token punctuation">:</span> goemetry<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.7</span></span>
<span class="line">            <span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// This is the view you want to show in the bottom sheet</span></span>
<span class="line">                <span class="token class-name">SettingsView</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">edgesIgnoringSafeArea</span><span class="token punctuation">(</span><span class="token punctuation">.</span>all<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3))]),n[25]||(n[25]=s("h3",{id:"audio-bluetooth-connection",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#audio-bluetooth-connection"},[s("span",null,"Audio Bluetooth Connection")])],-1)),a(l,{title:"Tip #496: Audio Bluetooth Connection. This code includes setting up your audio session in your app delegate to allow audio to be flipped between speaker and audio Bluetooth device. Trying this with AirPods: if you put your AirPods in your ear, the session will flip the audio from the speaker to the AirPods and update the image to a Bluetooth image and when removed the audio session flips back to the speaker with a speaker image.",src:"/videos/swift/audio-bluetooth-connection.mp4"}),s("details",q,[n[14]||(n[14]=p(`<summary>Audio Bluetooth Connection</summary><h4 id="appdelegate-swfit" tabindex="-1"><a class="header-anchor" href="#appdelegate-swfit"><span><code>AppDelegate.swfit</code></span></a></h4><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">import</span> <span class="token class-name">UIKit</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token class-name">AVFoundatino</span></span>
<span class="line"></span>
<span class="line"><span class="token attribute atrule">@main</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">AppDelegate</span><span class="token punctuation">:</span> <span class="token class-name">UIResponder</span><span class="token punctuation">,</span> <span class="token class-name">UIApplicationDelegate</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">application</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> application<span class="token punctuation">:</span> <span class="token class-name">UIApplication</span><span class="token punctuation">,</span> didFinishLaunchingWithOptions launchOptions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">UIApplication</span><span class="token punctuation">.</span><span class="token class-name">LaunchOptionsKey</span><span class="token punctuation">:</span> <span class="token keyword">Any</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token class-name">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCategory</span><span class="token punctuation">(</span><span class="token punctuation">.</span>playAndRecord<span class="token punctuation">,</span> mode<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span>defaultToSpeaker<span class="token punctuation">,</span> <span class="token punctuation">.</span>allowBluetooth<span class="token punctuation">,</span> <span class="token punctuation">.</span>allowBluetoothA2DP<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token keyword">let</span> error <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),s("h4",N,[s("a",B,[s("span",null,[a(i,{icon:"fa-brands fa-swift"}),n[13]||(n[13]=s("code",null,"ViewController.swift",-1))])])]),n[15]||(n[15]=p(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">import</span> <span class="token class-name">UIKit</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token class-name">AVFoundation</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token class-name">CoreBluetooth</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token class-name">UIViewController</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> manager<span class="token punctuation">:</span> <span class="token class-name">CBCentralManager</span><span class="token operator">!</span></span>
<span class="line"></span>
<span class="line">    <span class="token attribute atrule">@IBOutlet</span> <span class="token keyword">weak</span> <span class="token keyword">var</span> imageView<span class="token punctuation">:</span> <span class="token class-name">UIImageView</span><span class="token operator">!</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        manager <span class="token operator">=</span> <span class="token class-name">CBCentralManager</span><span class="token punctuation">(</span>delegate<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> queue<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> currentRouteOutput <span class="token operator">=</span> </span>
<span class="line">            <span class="token class-name">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>currentRRoute<span class="token punctuation">.</span>outputs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>portType</span>
<span class="line">        <span class="token function">checkSessionsOutput</span><span class="token punctuation">(</span>currentRouteOutput<span class="token punctuation">:</span> currentRouteOutput<span class="token punctuation">)</span></span>
<span class="line">        <span class="token class-name">NotificationCenter</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> selector<span class="token punctuation">:</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span><span class="token function">handleRouteChange</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> <span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token class-name">AVAudioSession</span><span class="token punctuation">.</span>routeChangeNotification<span class="token punctuation">,</span> object<span class="token punctuation">:</span><span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token comment">// when audio route changes from speaker to bluetooth</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">checkSessionOutput</span><span class="token punctuation">(</span>currentRouteOutput<span class="token punctuation">:</span> <span class="token class-name">AVAudioSession</span><span class="token punctuation">.</span><span class="token class-name">Port</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> currentRouteOutput<span class="token punctuation">.</span>rawValue<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;BluetoothA2DPOutput&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            imageView<span class="token punctuation">.</span>image <span class="token operator">=</span> <span class="token class-name">UIImage</span><span class="token punctuation">(</span>named<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;bluetooth&quot;</span></span><span class="token punctuation">)</span> <span class="token comment">// image from web, need to grab</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            imageView<span class="token punctuation">.</span>image <span class="token operator">=</span> <span class="token class-name">UIImage</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;speaker.wave.2.fill&quot;</span></span><span class="token punctuation">)</span> <span class="token comment">// system image, anyone can access</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token attribute atrule">@objc</span> <span class="token keyword">func</span> <span class="token function-definition function">handleRouteChange</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> notification<span class="token punctuation">:</span> <span class="token class-name">Notification</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;ROUTE CHANGE: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">notification<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> routeDescription <span class="token operator">=</span> <span class="token punctuation">(</span>notification <span class="token keyword">as</span> <span class="token class-name">NSNotificatoin</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span>userInfo<span class="token operator">!</span><span class="token punctuation">[</span><span class="token class-name">AVAudioSessionRouteChangePreviousRouteKey</span><span class="token punctuation">]</span> <span class="token keyword">as</span><span class="token operator">!</span> <span class="token class-name">AVAudioSessionRouteDescription</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">let</span> currentRouteOutput <span class="token operator">=</span> </span>
<span class="line">            <span class="token class-name">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>outputs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>portType</span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">let</span> prevRoute <span class="token operator">=</span> routeDescription <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Previous Route: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">prevRoute</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span>&quot;<span class="token class-name">Current</span> <span class="token class-name">Route</span><span class="token punctuation">:</span> <span class="token punctuation">\\</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">(</span>describing<span class="token punctuation">:</span> <span class="token class-name">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>currentRoute<span class="token punctuation">)</span><span class="token punctuation">)</span>&quot;<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token function">checkSessionOutput</span><span class="token punctuation">(</span>currentRouteOutput<span class="token punctuation">:</span> currentRouteOutput<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token class-name">CBCentralManagerDelegate</span><span class="token punctuation">,</span> <span class="token class-name">CBPeripheralDelegate</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">centralManagerDidUpdateState</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> central<span class="token punctuation">:</span> <span class="token class-name">CBCentralManager</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">switch</span> manager<span class="token punctuation">.</span>state <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token punctuation">.</span>poweredOff<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;BLE service is powered off&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token punctuation">.</span>poweredOn<span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;BLE service is powered on and scanning&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;BLE service is in another state&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1))]),n[26]||(n[26]=s("h3",{id:"note-analyzer-audiokit",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#note-analyzer-audiokit"},[s("span",null,"Note Analyzer AudioKit")])],-1)),a(l,{src:"/videos/swift/note-analyzer-audiokit.mp4"}),s("details",L,[n[17]||(n[17]=p(`<summary>Note Analyzer AudioKit</summary><h4 id="podfile" tabindex="-1"><a class="header-anchor" href="#podfile"><span><code>Podfile</code></span></a></h4><div class="language-ruby line-numbers-mode" data-highlighter="prismjs" data-ext="rb"><pre><code class="language-ruby"><span class="line">target <span class="token string-literal"><span class="token string">&#39;MetronomeApp&#39;</span></span> <span class="token keyword">do</span></span>
<span class="line">  pod <span class="token string-literal"><span class="token string">&#39;AudioKit&#39;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&#39;~&gt; 4.0&#39;</span></span></span>
<span class="line"><span class="token keyword">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="main-storyboard" tabindex="-1"><a class="header-anchor" href="#main-storyboard"><span><code>main.storyboard</code></span></a></h4><p>Add a <code>UILabel</code></p><figure><img src="`+f+'" alt="note-analyzer-audiokit-01" tabindex="0"><figcaption>note-analyzer-audiokit-01</figcaption></figure><h4 id="info-plist" tabindex="-1"><a class="header-anchor" href="#info-plist"><span><code>Info.plist</code></span></a></h4><p>Enable <code>Privacy - Microphone Usage Description</code></p><figure><img src="'+w+'" alt="note-analyzer-audiokit-02" tabindex="0"><figcaption>note-analyzer-audiokit-02</figcaption></figure>',9)),s("h4",R,[s("a",T,[s("span",null,[a(i,{icon:"fa-brands fa-swift"}),n[16]||(n[16]=s("code",null,"ViewController.swift",-1))])])]),n[18]||(n[18]=p(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">import</span> <span class="token class-name">UIKit</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token class-name">AudioKit</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">protocol</span> <span class="token class-name">TunerDelegate</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">tunerDidTick</span><span class="token punctuation">(</span>pitch<span class="token punctuation">:</span> <span class="token class-name">Pitch</span><span class="token punctuation">,</span> errRatio<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ViewController</span> <span class="token punctuation">:</span> <span class="token class-name">UIViewController</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@IBOutlet</span> <span class="token keyword">weak</span> <span class="token keyword">var</span> noteLabel<span class="token punctuation">:</span> <span class="token class-name">UILabel</span><span class="token operator">!</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> tuner <span class="token operator">=</span> <span class="token class-name">Tuner</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        tuner<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token class-name">Timer</span><span class="token punctuation">.</span><span class="token function">scheduledTimer</span><span class="token punctuation">(</span>timeInterval<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> selector<span class="token punctuation">:</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>getNote<span class="token punctuation">)</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token attribute atrule">@objc</span> <span class="token keyword">func</span> <span class="token function-definition function">getNote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span>tuner<span class="token punctuation">.</span><span class="token function">getNote</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        noteLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> tuner<span class="token punctuation">.</span><span class="token function">getNote</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">switch</span> tuner<span class="token punctuation">.</span>returnAccidental <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token punctuation">.</span>flat<span class="token punctuation">,</span> <span class="token punctuation">.</span>sharp<span class="token punctuation">:</span></span>
<span class="line">            noteLabel<span class="token punctuation">.</span>textColor <span class="token operator">=</span> <span class="token punctuation">.</span>red</span>
<span class="line">        <span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">            noteLabel<span class="token punctuation">.</span>textColor <span class="token operator">=</span> <span class="token punctuation">.</span>green        </span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Tuner</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> mic<span class="token punctuation">:</span> <span class="token class-name">AKMicrophone</span></span>
<span class="line">    <span class="token keyword">var</span> tracker<span class="token punctuation">:</span> <span class="token class-name">AKFrequencyTracker</span></span>
<span class="line">    <span class="token keyword">var</span> silence<span class="token punctuation">:</span> <span class="token class-name">AKBooster</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> pollingInterval <span class="token operator">=</span> <span class="token number">0.05</span></span>
<span class="line">    <span class="token keyword">var</span> pollingTimer<span class="token punctuation">:</span> <span class="token class-name">Timer</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> delegate<span class="token punctuation">:</span> <span class="token class-name">TunerDelegate</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token class-name">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCategory</span><span class="token punctuation">(</span><span class="token punctuation">.</span>record<span class="token punctuation">,</span> mode<span class="token punctuation">:</span> <span class="token punctuation">.</span>measurement<span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token keyword">let</span> error <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">AKSettings</span><span class="token punctuation">.</span>audioInputEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">        mic <span class="token operator">=</span> <span class="token class-name">AKMicrophone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span></span>
<span class="line">        tracker <span class="token operator">=</span> <span class="token class-name">AKFrequencyTracker</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>mic<span class="token punctuation">)</span></span>
<span class="line">        silence <span class="token operator">=</span> <span class="token class-name">AKBooster</span><span class="token punctuation">(</span>tracker<span class="token punctuation">,</span> gain<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">AKManager</span><span class="token punctuation">.</span>output <span class="token operator">=</span> silence</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token class-name">AKManager</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token keyword">let</span> error <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        pollingTimer <span class="token operator">=</span> <span class="token class-name">Timer</span><span class="token punctuation">.</span><span class="token function">scheduledTimer</span><span class="token punctuation">(</span>withTimeInterval<span class="token punctuation">:</span> pollingInterval<span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> block<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span><span class="token punctuation">)</span> <span class="token keyword">in</span></span>
<span class="line">            <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">pollingTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">try</span> <span class="token class-name">AKManager</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token keyword">let</span> error <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">let</span> t <span class="token operator">=</span> pollingTimer <span class="token punctuation">{</span></span>
<span class="line">            t<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> returnNote <span class="token operator">=</span> <span class="token class-name">Note</span><span class="token punctuation">.</span><span class="token class-name">Name</span><span class="token punctuation">(</span>rawValue<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">var</span> returnAccidental <span class="token operator">=</span> <span class="token class-name">Note</span><span class="token punctuation">.</span><span class="token class-name">Accidental</span><span class="token punctuation">(</span>rawValue<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">pollingTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> frequency <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>tracker<span class="token punctuation">.</span>frequency<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> pitch <span class="token operator">=</span> <span class="token class-name">Pitch</span><span class="token punctuation">.</span><span class="token function">makePitchByFrequency</span><span class="token punctuation">(</span>frequency<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> errRatio <span class="token operator">=</span> frequency <span class="token operator">/</span> pitch<span class="token punctuation">.</span>frequency</span>
<span class="line">        returnNote <span class="token operator">=</span> pitch<span class="token punctuation">.</span>note<span class="token punctuation">.</span>note</span>
<span class="line">        returnAccidental <span class="token operator">=</span> pitch<span class="token punctuation">.</span>note<span class="token punctuation">.</span>accidental</span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">let</span> d <span class="token operator">=</span> delegate <span class="token punctuation">{</span></span>
<span class="line">            d<span class="token punctuation">.</span><span class="token function">tunerDidTick</span><span class="token punctuation">(</span>ptich<span class="token punctuation">:</span> pitch<span class="token punctuation">,</span> errRatio<span class="token punctuation">:</span> errRatio<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">getNote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">var</span> accidental <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span></span>
<span class="line">        <span class="token keyword">switch</span> returnAccidental <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token punctuation">.</span>natural<span class="token punctuation">:</span> accidental <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;♮&quot;</span></span>    </span>
<span class="line">        <span class="token keyword">case</span> <span class="token punctuation">.</span>flat<span class="token punctuation">:</span> accidental <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;♭&quot;</span></span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token punctuation">.</span>sharp<span class="token punctuation">:</span> accidental <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;♯&quot;</span></span></span>
<span class="line">        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token keyword">break</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">let</span> noteString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">returneNote <span class="token operator">??</span> <span class="token class-name">Note</span><span class="token punctuation">.</span><span class="token class-name">Name</span><span class="token punctuation">.</span><span class="token class-name">A</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">accidental</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span></span>
<span class="line">        <span class="token keyword">return</span> noteString</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Note</span><span class="token punctuation">:</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">enum</span> <span class="token class-name">Accidental</span><span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">case</span> naturla <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sharp<span class="token punctuation">,</span> flat <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">enum</span> <span class="token class-name">Name</span><span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span> <span class="token keyword">case</span> <span class="token class-name">A</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token class-name">F</span><span class="token punctuation">,</span> <span class="token class-name">G</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">static</span> int all<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Note</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>natural<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">C</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>sharp<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">        <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>natural<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">        <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>flat<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>natural<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">F</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>natural<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">F</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>sharp<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">G</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>natural<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>flat<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>natural<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>flat<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">B</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>natural<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> note<span class="token punctuation">:</span> <span class="token class-name">Name</span></span>
<span class="line">    <span class="token keyword">var</span> accidental<span class="token punctuation">:</span> <span class="token class-name">Accidental</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Initializer</span></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> note<span class="token punctuation">:</span> <span class="token class-name">Name</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> accidental<span class="token punctuation">:</span> <span class="token class-name">Accidental</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>note <span class="token operator">=</span> note</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>accidental <span class="token operator">=</span> accidental</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//Equality operators.</span></span>
<span class="line">    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token operator">==</span><span class="token punctuation">(</span>lhs<span class="token punctuation">:</span> <span class="token class-name">Note</span><span class="token punctuation">,</span> rhs<span class="token punctuation">:</span> <span class="token class-name">Note</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> lhs<span class="token punctuation">.</span>note <span class="token operator">==</span> rhs<span class="token punctuation">.</span>note <span class="token operator">&amp;&amp;</span></span>
<span class="line">          lhs<span class="token punctuation">.</span>accidental <span class="token operator">==</span> rhs<span class="token punctuation">.</span>accidental</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token operator">!=</span><span class="token punctuation">(</span>lhs<span class="token punctuation">:</span> <span class="token class-name">Note</span><span class="token punctuation">,</span> rhs<span class="token punctuation">:</span> <span class="token class-name">Note</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span>lhs <span class="token operator">==</span> rhs<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> frequency<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token class-name">Note</span><span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">firstIndex</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">)</span><span class="token operator">!</span> <span class="token operator">-</span> <span class="token class-name">Note</span><span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">firstIndex</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token class-name">Note</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token class-name">A</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>natural<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token number">440.0</span> <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">12.0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Pitch</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> frequency<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">    <span class="token keyword">let</span> note<span class="token punctuation">:</span> <span class="token class-name">Note</span></span>
<span class="line">    <span class="token keyword">let</span> octave<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">init</span><span class="token punctuation">(</span>note<span class="token punctuation">:</span> <span class="token class-name">Note</span><span class="token punctuation">,</span> octave<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>note <span class="token operator">=</span> note</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>octave <span class="token operator">=</span> octave</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>frequency <span class="token operator">=</span> note<span class="token punctuation">.</span>frequency <span class="token operator">*</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>octave<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4.0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">static</span> <span class="token keyword">let</span> all <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">...</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map <span class="token punctuation">{</span> octave <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token class-name">Pitch</span><span class="token punctuation">]</span> <span class="token keyword">in</span></span>
<span class="line">        <span class="token class-name">Note</span><span class="token punctuation">.</span>all<span class="token punctuation">.</span>map <span class="token punctuation">{</span> note <span class="token operator">-&gt;</span> <span class="token class-name">Pitch</span> <span class="token keyword">in</span> </span>
<span class="line">            <span class="token class-name">Pitch</span><span class="token punctuation">(</span>note<span class="token punctuation">:</span> note<span class="token punctuation">,</span> octave<span class="token punctuation">:</span> octave<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">joined</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">makePitchByFrequency</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> frequency<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Pitch</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">var</span> results <span class="token operator">=</span> all<span class="token punctuation">.</span>map <span class="token punctuation">{</span> pitch <span class="token operator">-&gt;</span> <span class="token punctuation">(</span>pitch<span class="token punctuation">:</span> <span class="token class-name">Pitch</span><span class="token punctuation">,</span> distance<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token keyword">in</span> </span>
<span class="line">            <span class="token punctuation">(</span>pitch<span class="token punctuation">:</span> pitch<span class="token punctuation">,</span> distance<span class="token punctuation">:</span> <span class="token function">abs</span><span class="token punctuation">(</span>pitch<span class="token punctuation">.</span>frequency <span class="token operator">-</span> frequency<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        results<span class="token punctuation">.</span>sort <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>distance <span class="token operator">&lt;</span> <span class="token short-argument">$1</span><span class="token punctuation">.</span>distance <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> results<span class="token punctuation">.</span>first<span class="token operator">!</span><span class="token punctuation">.</span>pitch</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1))]),n[27]||(n[27]=s("h3",{id:"stretchy-header",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#stretchy-header"},[s("span",null,"Stretchy Header")])],-1)),a(l,{src:"/videos/swift/stretchy-header.mp4"}),n[28]||(n[28]=p(`<details class="hint-container details"><summary>Stretchy Header</summary><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code class="language-swift"><span class="line"><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">DiscountDetailsView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@EnvironmentObject</span> <span class="token keyword">private</span> <span class="token keyword">var</span> model<span class="token punctuation">:</span> <span class="token class-name">FashionModel</span></span>
<span class="line">    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> selection<span class="token punctuation">:</span> <span class="token class-name">Product</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> product<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Product</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// MARK:- BODY</span></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">GeometryReader</span> <span class="token punctuation">{</span> geo <span class="token keyword">in</span> </span>
<span class="line">            content<span class="token punctuation">.</span><span class="token function">toolbar</span><span class="token punctuation">(</span>content<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... [생략] ... */</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> content<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">ScrollView</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">VStack</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">DiscountHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token class-name">ScrollView</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token class-name">VStack</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token class-name">LazyVGrid</span><span class="token punctuation">(</span>columns<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">GridItem</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">adaptive</span><span class="token punctuation">(</span>minimum<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">,</span> maximum<span class="token punctuation">:</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">,</span> alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>center<span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line">                                 alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>center<span class="token punctuation">,</span> spacing<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                            <span class="token class-name">ForEach</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token punctuation">{</span> item <span class="token keyword">in</span> </span>
<span class="line">                                <span class="token class-name">NavigationLink</span><span class="token punctuation">(</span>destination<span class="token punctuation">:</span> <span class="token class-name">DetailsView</span><span class="token punctuation">(</span>product<span class="token punctuation">:</span> item<span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">                                               tag<span class="token punctuation">:</span> item<span class="token punctuation">,</span></span>
<span class="line">                                               selection<span class="token punctuation">:</span> $selection<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                                    <span class="token class-name">ProductCard</span><span class="token punctuation">(</span>product<span class="token punctuation">:</span> item<span class="token punctuation">)</span></span>
<span class="line">                                <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">buttonStyle</span><span class="token punctuation">(</span><span class="token class-name">SquishableButtonStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                                <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span></span>
<span class="line">                                <span class="token punctuation">.</span><span class="token function">onReceive</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>$selectedProductID<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... [생략] ... */</span> <span class="token punctuation">}</span></span>
<span class="line">                            <span class="token punctuation">}</span></span>
<span class="line">                        <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>top<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">.</span>secondarySystemBackground<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><hr>`,2)),a(r)])}const U=d(y,[["render",M]]),z=JSON.parse('{"path":"/programming/swift/snippets/","title":"Snippets","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Snippets","description":"Swift > Snippets","icon":"fas fa-eye-dropper","category":["Swift","Snippets"],"tag":["references","swift"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Snippets\\",\\"image\\":[\\"https://chanhi2000.github.io/images/swift/note-analyzer-audiokit-01.jpg\\",\\"https://chanhi2000.github.io/images/swift/note-analyzer-audiokit-02.jpg\\"],\\"dateModified\\":null,\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/programming/swift/snippets/"}],["meta",{"property":"og:site_name","content":"chanhi2000"}],["meta",{"property":"og:title","content":"Snippets"}],["meta",{"property":"og:description","content":"Swift > Snippets"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/images/swift/note-analyzer-audiokit-01.jpg"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"references"}]]},"git":{},"readingTime":{"minutes":5.82,"words":1747},"filePathRelative":"programming/swift/snippets/README.md"}');export{U as comp,z as data};
